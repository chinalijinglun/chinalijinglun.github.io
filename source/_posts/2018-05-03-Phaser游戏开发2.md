---
title: Phaser游戏开发2
subtitle: Phaser游戏开发2
date: 2018-05-03 15:45:09
cover: 2018/04/27/登录/cover.jpg
categories: 游戏开发
tags:
  - Phaser
  - 游戏开发
author:
    nick: lijinglun
    github_name: lijinglun
---

Phaser游戏开发2；

上面的代码已经完成了80%的内容，下面让我们来继续完善游戏内容；

### 碰撞检测
```javascript
    game.physics.arcade.collide(player, platforms);
```
Phaser.Physics.arcade.collide(object1, object2, collideCallback, processCallback, callbackContext)

参数分别为，对象1，对象2，碰撞回调函数，比如有的关卡，有陷阱一类的，人物要是碰撞后，在回调中kill人物，state跳到over上。

### 重叠检测
跟碰撞类似，只是api不同
```javascript
    game.physics.arcade.overlap(player, platforms);
```
Phaser.Physics.arcade.overlap(object1, object2, collideCallback, processCallback, callbackContext)

多用在获得道具上，比如人物和星星重叠后，可以加分，然后消除星星。

```javascript
        game.physics.arcade.overlap(player,stars,function (player,star) {
           scroe += 10;
           fonts.text = 'scroe: ' + scroe;
           star.kill();
        })
```

### 上下左右操作

```
cursors = game.input.keyboard.createCursorKeys();
```
Phaser.Game.input.keyboard.createCursorKeys()

```javascript
        if(cursors.left.isDown){
            player.body.velocity.x = -150;
            player.animations.play('left');
        }else if(cursors.right.isDown){
            player.body.velocity.x = 150;
            player.animations.play('right');
        }else{
            player.frame = 4;
            player.body.velocity.x = 0;
            player.animations.stop();
        }
```
当按下键盘 <- 左键时，x轴加速为-150，然后执行animations的left动画，有一点是需要注意的是，在没有按下左右键的时候，让frame定格在第4帧，
```js
player.frame = 4;
```

以下为全部代码：
Phaser 小游戏[About](/2018/05/03/Phaser游戏开发2/phaser1.zip)。